@model Ads.Shared.Contracts.PagedCollection<AdsVMIndex>
@{
    int? GetCurrentUserId()
    {
        if (!User.Identity.IsAuthenticated)
            return null;
        int userId = Convert.ToInt32(
            User.Claims.FirstOrDefault(t => 
            t.Type == Authentication.Contracts.CookieAuthentication.CookieCustomClaimNames.UserId).Value);
        return userId;
    }
    int? UserId = GetCurrentUserId();
    ViewData["Title"] = "Home Page";
}
<script src="~/js/test.js" asp-append-version="true"></script>
<div class="my_nav">
    <form asp-action="Index" method="get">
        <ul id="category_output"></ul>
        <input type="hidden" id="cat_name" name="CategoryId" />
        <input name="Substring" class="input-sm" placeholder="Поиск..." />
        <button class="btn btn-default btn-xs btn-block" id="filter"> Фильтровать</button>
        <br />
        <span class="price">
            Диапазон: от
            <input type="number" step="1" min="1" max="15000000000" id="num_count" name="MinValue" value="" class="input-sm input-price" size="4" />
            до :
            <input type="number" step="1" min="1" max="15000000000" id="num_count" name="MaxValue" value="" class="input-sm input-price" size="4" />
        </span>

    </form>
</div>
<div class="cat_list">
    <ul class="list-group">
        @foreach (var item in Model.Items)
        {
            <li id="advert_list" class="list-group-item nav-item">
                <form asp-action="Delete" asp-controller="Adverts" onsubmit='return confirm("Вы точно хотите удалить объявление?");'>
                    <a class="nav-item text-dark" asp-action="Details" asp-route-id="@item.Id">  </a>
                    <span>
                        @if (item.Images != null)
                        {
                            if (!string.IsNullOrEmpty(item.Images.FirstOrDefault()))
                            {
                                var src = string.Format("data:image/gif;base64,{0}", item.Images.First());
                                <img class="img-rounded" id="index_img" src='@src' alt="Default image" />
                            }
                            else
                            {
                                <img class="img-rounded" id="index_img" src="~/images/default.jpg" alt="Default image" />

                            }
                        }
                    </span>
                    <p>@item.Name</p>
                    <p>@item.City.Name</p>
                    <p>@item.Price<hr />@item.Created</p>
                    <span class="adverts_actions">
                        @if ((User.Identity.IsAuthenticated) && (UserId == item.UserId))
                        {<a class="nav-item text-dark" asp-action="Edit" asp-route-id="@item.Id">Изменить |</a>}
                        <a class="nav-item text-dark" asp-action="Details" asp-route-id="@item.Id">Детали</a> 
                        @if ((User.Identity.IsAuthenticated) && (UserId == item.UserId))
                        {
                            {<button type="submit" asp-controller="Adverts" asp-action="Delete" class="btn btn-primary" asp-route-id="@item.Id">Удалить</button>}
                        }
                    </span>
                </form>
            </li>
        }
    </ul>

    @if (Model.PageNumber > 1)
    {
        <form>
            <input hidden name="PageNumber" value="@(Model.PageNumber-1)" />
            <button asp-action="Index" asp-controller="Adverts">Предыдущая страница</button>
        </form>
    }
    @if (Model.PageNumber < Model.TotalPages)
    {
        <form>
            <input hidden name="PageNumber" value="@(Model.PageNumber+1)" />
            <button asp-action="Index" asp-controller="Adverts">Следующая страница</button>
        </form>
    }
</div>